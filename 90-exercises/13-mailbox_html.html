<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="description" content="Ruby for Beginners">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <link href="../assets/stylesheets/monstas-cd25157c.css" rel="stylesheet" />
    <link rel="icon" type="image/png" href="../assets/images/favicon-870787d6.png" />
  </head>

  <body>

    <div>
      <nav class="toc">
        <h1>Contents</h1>
        <ul>
<li>
<a href="#the-mailbox-html-formatter">The Mailbox Html Formatter</a>
<ul>
<li>
<a href="#separation-of-concerns">Separation of concerns</a>
</li>
<li>
<a href="#model-view-controller">Model, View, Controller</a>
</li>
<li>
<a href="#exercise-13-1">Exercise 13.1</a>
</li>
</ul>
</li>
</ul>


      </nav>
      <article>
        <nav class="menu"><a href="#"></a></nav>
        <h1>The Mailbox Html Formatter</h1>

<h2>Separation of concerns</h2>

<p>One question that may have come up while working on the mailbox text formatter
exercise is:</p>

<p>Why would we have a separate class for formatting the ASCII table (that is, a
plain text table that uses characters like <code>+</code>, <code>-</code>, and <code>|</code>)?</p>

<p>The reason is: We want each one of our classes to encapsulate one concept that
is useful in our application. We also say: each one of our classes should be
<em>concerned</em> with one responsibility.</p>

<p>An email vaguely resembles the concept of an analog letter, written on paper:
some message is being sent from one person to another. Nowadays everyone knows
what an email is: it stores all information about this particular message. The
same is true for mailboxes, which are used to store a bunch of emails.
Formatting a number of emails in order to be displayed on a text based terminal
is a very different concept, and concern.</p>

<p>Therefore it makes a lot of sense to have three different classes implement each
one of these concepts, or concerns. And it even makes <em>so</em> much sense that it is
called a design principle in programming: The principle of <a href="http://www.wikiwand.com/en/Separation_of_concerns">separation of
concerns</a>.</p>

<p>Aside from being comprehensible and mapping to concepts that we already know,
one other advantage is: We can now easily implement other formatter classes
that format our emails in a different way, suitable to be displayed in other
media.</p>

<p>And that&rsquo;s what this exercise is about: We want to display our mailbox contents
in HTML, the format that browsers like to use. If you are unfamiliar with what
HTML is, and how it looks like, you can read up on it
<a href="http://webapps-for-beginners.rubymonstas.org/html.html">here</a>.
This will be our first step towards learning how to build a web application.</p>

<h2>Model, View, Controller</h2>

<p>Before we get to that, we&rsquo;d like to point out one other aspect, that you&rsquo;ll
remember when we get to talk about the architecture that Rails use to structure
and separate concerns, called &ldquo;model, view, controller&rdquo;.</p>

<ul>
<li>The two classes <code>Email</code> and <code>Mailbox</code> in your application are <em>models</em>: they
are concerned with modelling those &ldquo;real-world&rdquo; things that your users are
interested in: they want to work with emails.</li>
<li>The class <code>MailboxTextFormatter</code> on the other hand is a <em>view</em>: It is used in
order to generate a certain representation, in a format that is suitable to a
certain medium (the terminal, in our case).</li>
<li>You don&rsquo;t have a <em>controller</em> class so far, but the little bit of code at the
end of the file does what a controller usually would do: it generates some
models (the emails, and the mailbox objects) and passes them to the view (the
formatter) in order to be rendered into something that can then be returned
and displayed.</li>
</ul>

<p>If this doesn&rsquo;t make a whole lot of sense to you at the moment, don&rsquo;t worry.
You&rsquo;ll understand it more once we build our first Rails application.</p>

<h2>Exercise 13.1</h2>

<p>Ok, now to our exercise. We will  start over with the same code again, except
that our formatter class now will be called <code>MailboxHtmlFormatter</code>.</p>

<p>Copy your file <code>mailbox_text-1.rb</code> to <code>mailbox_html-1.rb</code> and change it
like so. Then fill in the <code>MailboxHtmlFormatter</code> class.</p>
<div class="highlight"><pre class="highlight ruby"><code><span class="k">class</span> <span class="nc">Email</span>
  <span class="c1"># your class from the last exercise</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">Mailbox</span>
  <span class="c1"># your class from the last exercise</span>
<span class="k">end</span>

<span class="k">class</span> <span class="nc">MailboxHtmlFormatter</span>
  <span class="c1"># fill in this class body</span>
<span class="k">end</span>

<span class="n">emails</span> <span class="o">=</span> <span class="p">[</span>
  <span class="no">Email</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Homework this week"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:date</span> <span class="o">=&gt;</span> <span class="s2">"2014-12-01"</span><span class="p">,</span> <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="s2">"Ferdous"</span> <span class="p">}),</span>
  <span class="no">Email</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Keep on coding! :)"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:date</span> <span class="o">=&gt;</span> <span class="s2">"2014-12-01"</span><span class="p">,</span> <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="s2">"Dajana"</span> <span class="p">}),</span>
  <span class="no">Email</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Re: Homework this week"</span><span class="p">,</span> <span class="p">{</span> <span class="ss">:date</span> <span class="o">=&gt;</span> <span class="s2">"2014-12-02"</span><span class="p">,</span> <span class="ss">:from</span> <span class="o">=&gt;</span> <span class="s2">"Ariane"</span> <span class="p">})</span>
<span class="p">]</span>
<span class="n">mailbox</span> <span class="o">=</span> <span class="no">Mailbox</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="s2">"Ruby Study Group"</span><span class="p">,</span> <span class="n">emails</span><span class="p">)</span>
<span class="n">formatter</span> <span class="o">=</span> <span class="no">MailboxHtmlFormatter</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">mailbox</span><span class="p">)</span>

<span class="nb">puts</span> <span class="n">formatter</span><span class="p">.</span><span class="nf">format</span>
</code></pre></div>
<p>Your goal is to complete the code in a way so it outputs the following:</p>
<div class="highlight"><pre class="highlight html"><code><span class="nt">&lt;html&gt;</span>
  <span class="nt">&lt;head&gt;</span>
    <span class="nt">&lt;style&gt;</span>
      <span class="nt">table</span> <span class="p">{</span>
        <span class="nl">border-collapse</span><span class="p">:</span> <span class="nb">collapse</span><span class="p">;</span>
      <span class="p">}</span>
      <span class="nt">td</span><span class="o">,</span> <span class="nt">th</span> <span class="p">{</span>
        <span class="nl">border</span><span class="p">:</span> <span class="m">1px</span> <span class="nb">solid</span> <span class="no">black</span><span class="p">;</span>
        <span class="nl">padding</span><span class="p">:</span> <span class="m">1em</span><span class="p">;</span>
      <span class="p">}</span>
    <span class="nt">&lt;/style&gt;</span>
  <span class="nt">&lt;/head&gt;</span>
  <span class="nt">&lt;body&gt;</span>
    <span class="nt">&lt;h1&gt;</span>Ruby Study Group<span class="nt">&lt;/h1&gt;</span>
    <span class="nt">&lt;table&gt;</span>
      <span class="nt">&lt;thead&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;th&gt;</span>Date<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th&gt;</span>From<span class="nt">&lt;/th&gt;</span>
          <span class="nt">&lt;th&gt;</span>Subject<span class="nt">&lt;/th&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/thead&gt;</span>
      <span class="nt">&lt;tbody&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>2014-12-01<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Ferdous<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Homework this week<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>2014-12-01<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Dajana<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Keep on coding! :)<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
        <span class="nt">&lt;tr&gt;</span>
          <span class="nt">&lt;td&gt;</span>2014-12-02<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Ariane<span class="nt">&lt;/td&gt;</span>
          <span class="nt">&lt;td&gt;</span>Re: Homework this week<span class="nt">&lt;/td&gt;</span>
        <span class="nt">&lt;/tr&gt;</span>
      <span class="nt">&lt;/tbody&gt;</span>
    <span class="nt">&lt;/table&gt;</span>
  <span class="nt">&lt;/body&gt;</span>
<span class="nt">&lt;/html&gt;</span>
</code></pre></div>
<p>Does that look scary? A little bit, maybe. It&rsquo;s probably fair
to say that manually writing HTML isn&rsquo;t very popular amongst most programmers.
Therefore there are quite a few tools that make our lives easier. And your task
is to write such a tool.</p>

<p>Also, this exercise should actually be easier for you to complete than the
previous one. You already have a bunch of practice in iterating over emails,
and working with arrays and strings. And this time, you don&rsquo;t need to deal with
the maximum length of strings per column. You can just interpolate things
together.</p>

<p><a href="/solutions/mailbox_html-1.html" class="solution">Show solution</a></p>

      </article>
    </div>

    <footer>
      <ul>
        <li><a href="http://rubymonstas.org">Ruby Monstas</a></li>
        <li><a href="http://ruby-for-beginners.rubymonstas.org">Ruby For Beginners</a></li>
        <li><a href="http://webapps-for-beginners.rubymonstas.org">Webapps For Beginners</a></li>
        <li><a href="http://testing-for-beginners.rubymonstas.org">Testing For Beginners</a></li>
        <li><a href="mailto:ruby.monsters@gmail.com">Email</a></li>
        <li><a href="https://twitter.com/rubymonstas">Twitter</a></li>
        <li><a href="https://github.com/rubymonsters">GitHub</a></li>
        <li><a href="https://creativecommons.org/licenses/by-sa/2.0/" rel="license cc:license">License</a></li>
        <li><a href="http://foundation.travis-ci.org/imprint/">Imprint</a></li>
      </ul>
    </footer>

    <script src="../assets/javascripts/modernizr-16671e9f.js"></script>
    <script src="../assets/javascripts/monstas-83702c28.js"></script>
  </body>
</html>
